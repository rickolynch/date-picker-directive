{"version":3,"file":"date-range-picker.directive.js","sourceRoot":"","sources":["date-range-picker.directive.ts"],"names":[],"mappings":";;;;AAAA,OAAO,EAAiB,SAAS,EAAc,YAAY,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,YAAY,EAAE,SAAS,EAAa,MAAM,eAAe,CAAC;AAC9I,OAAO,EAAE,wBAAwB,EAAkC,gBAAgB,EAAE,MAAM,eAAe,CAAC;AAE3G,OAAO,EAAE,wBAAwB,EAAE,MAAM,6CAA6C,CAAC;AAIvF,MAAM;;;;;;;IAaJ,YAAoB,MAAc,EAAU,QAAmB,EAAU,aAA+B,EAC9F;QADU,WAAM,GAAN,MAAM,CAAQ;QAAU,aAAQ,GAAR,QAAQ,CAAW;QAAU,kBAAa,GAAb,aAAa,CAAkB;QAC9F,6BAAwB,GAAxB,wBAAwB;4BANT,IAAI,YAAY,EAAE;8BAChB,IAAI,YAAY,EAAE;4BAC9B,IAAI;4BACJ,KAAK;KAG6C;;;;;IAGjE,OAAO,CAAC,KAAY;QAClB,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,CAAC;QACvB,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,aAAa,CAAC,aAAa,EAAE,UAAU,EAAE,UAAU,CAAC,CAAC;QACvG,qBAAI,MAAM,GAAG,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,aAAa,CAAC,YAAY,CAAC;QACnE,IAAI,CAAC,aAAa,CAAC,KAAK,EAAE,CAAC;QAC3B,qBAAI,gBAAgB,GAAG,IAAI,CAAC,wBAAwB,CAAC,uBAAuB,CAAC,wBAAwB,CAAC,CAAC;QACvG,IAAI,CAAC,YAAY,GAAG,IAAI,CAAC,aAAa,CAAC,eAAe,CAAC,gBAAgB,CAAC,CAAC;QACzE,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;QAClD,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;QAClD,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,gBAAgB,GAAG,IAAI,CAAC,gBAAgB,CAAC;QACpE,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC;QACtD,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC;QAElD,QAAQ,CAAC,sBAAsB,CAAC,aAAa,CAAC,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,OAAO,EAAE,MAAM,GAAG,QAAQ,CAAC,MAAM,GAAG,EAAE,CAAC,GAAG,IAAI,CAAC,CAAC;QAC/G,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,KAAK,CAAC,SAAS,CAAC,GAAG,EAAE;YAC9C,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC;SAC7B,CAAC,CAAC;QACH,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,YAAY,CAAC,SAAS,CAAC,CAAC,GAAG,EAAE,EAAE;YACxD,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YAC5B,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC;YAC5B,IAAI,CAAC,YAAY,GAAG,KAAK,CAAC;SAC3B,CAAC,CAAC;;;;;;IAKE,OAAO,CAAC,aAAa;QAC1B,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;YACtB,uBAAM,SAAS,GAAG,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,aAAa,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC;YACnF,uBAAM,YAAY,GAAG,IAAI,CAAC,aAAa,CAAC,OAAO,CAAC,aAAa,IAAI,aAAa,CAAC;YAC/E,uBAAM,IAAI,GAAG,CAAC,aAAa,CAAC,aAAa,CAAC,CAAC,CAAC,aAAa,CAAC,aAAa,CAAC,SAAS,CAAC,QAAQ,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;YACpH,EAAE,CAAC,CAAC,CAAC,SAAS,IAAI,CAAC,YAAY,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;gBACzC,EAAE,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,CAAC,CAAC;oBACtB,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC;iBAC7B;aACF;SACF;;;;YAxDJ,SAAS,SAAC;gBACT,QAAQ,EAAE,eAAe;aAC1B;;;;YANmE,MAAM;YAAwB,SAAS;YACxC,gBAAgB;YAA1E,wBAAwB;;;wBAO9B,KAAK;wBACL,KAAK;iCACL,KAAK;gCACL,KAAK;0BACL,KAAK;wBACL,KAAK;wBACL,KAAK;6BACL,MAAM;+BACN,MAAM;wBAON,YAAY,SAAC,OAAO,EAAE,CAAC,QAAQ,CAAC;wBA0BhC,YAAY,SAAC,gBAAgB,EAAE,CAAC,eAAe,CAAC","sourcesContent":["import { AfterViewInit, Directive, ElementRef, EventEmitter, Input, NgZone, Output, HostListener, Renderer2, ViewChild } from \"@angular/core\";\nimport { ComponentFactoryResolver, ComponentFactory, ComponentRef, ViewContainerRef } from '@angular/core';\n\nimport { DaterangepickerComponent } from './daterangepicker/daterangepicker.component';\n@Directive({\n  selector: '[date-picker]'\n})\nexport class DateRangePickerDirective {\n  @Input() minDate?: string;\n  @Input() maxDate?: string;\n  @Input() singleDatePicker?: boolean;\n  @Input() linkedCalendars?: boolean\n  @Input() startDate?: string;\n  @Input() ngModel?: string;\n  @Input() endDate?: string;\n  @Output() dateselected = new EventEmitter();\n  @Output() ngModelChanged = new EventEmitter();\n  componentRef = null;\n  pickerLoaded = false;\n\n  constructor(private ngZone: NgZone, private renderer: Renderer2, private viewContainer: ViewContainerRef,\n    private componentFactoryResolver: ComponentFactoryResolver) { }\n\n  @HostListener('focus', ['$event'])\n  onFocus(event: Event) {\n    console.log('focused');\n    this.renderer.setStyle(this.viewContainer.element.nativeElement.parentElement, 'position', 'relative');\n    let height = this.viewContainer.element.nativeElement.offsetHeight;\n    this.viewContainer.clear();\n    let componentFactory = this.componentFactoryResolver.resolveComponentFactory(DaterangepickerComponent);\n    this.componentRef = this.viewContainer.createComponent(componentFactory);\n    this.componentRef.instance.minDate = this.minDate;\n    this.componentRef.instance.maxDate = this.maxDate;\n    this.componentRef.instance.singleDatePicker = this.singleDatePicker;\n    this.componentRef.instance.startDate = this.startDate;\n    this.componentRef.instance.endDate = this.endDate;\n\n    document.getElementsByClassName('rl-drpicker')[0].setAttribute('style', 'top:' + parseInt(height + 10) + 'px');\n    this.componentRef.instance.close.subscribe(() => {\n      this.componentRef.destroy();\n    });\n    this.componentRef.instance.dateSelected.subscribe((val) => {\n      this.dateselected.emit(val);\n      this.componentRef.destroy();\n      this.pickerLoaded = false;\n    });\n\n  }\n\n  @HostListener('document:click', ['$event.target'])\n  public onClick(targetElement) {\n    if (this.componentRef) {\n      const clickedDp = this.componentRef.location.nativeElement.contains(targetElement);\n      const clickedInput = this.viewContainer.element.nativeElement == targetElement;\n      const inDp = (targetElement.parentElement ? targetElement.parentElement.classList.contains('calendar-row') : false);\n      if (!clickedDp && !clickedInput && !inDp) {\n        if (this.componentRef) {\n          this.componentRef.destroy();\n        }\n      }\n    }\n\n  }\n}\n"]}